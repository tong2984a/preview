<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv=“Pragma” content=”no-cache”>
  <meta http-equiv=“Expires” content=”-1″>
  <meta http-equiv=“CACHE-CONTROL” content=”NO-CACHE”>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Hello, Vegan!</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/select2.min.css">
  <link href="css/select2-bootstrap4.css" rel="stylesheet">
  <link rel="stylesheet" href="css/sidebar.css">
  <link href="css/selectbox.css" rel="stylesheet">
  <link href="css/autocomplete.css" rel="stylesheet">
  <link rel="stylesheet" href="css/leaflet.css" />
  <link rel="stylesheet" href="css/slideshow.css" />
  <link rel="stylesheet" href="css/leaflet-search.src.css" />
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<style>
.gcards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(15rem, 1fr));
  grid-gap: 1rem;
  justify-content: center;
  align-items: center;
  margin: auto;
  padding: 1rem 0;
}
.gcard {
  display: flex;
  align-items: center;
  flex-direction: column;
  width: 15rem auto;
  height: 15rem;
  background: #fff;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
  border-radius: 10px;
  margin: auto;
  overflow: hidden;
}
.gcard--avatar {
  width: 100%;
  height: 10rem;
  object-fit: cover;
}
.gcard--title {
  color: #222;
  font-weight: 700;
  text-transform: capitalize;
  font-size: 1.1rem;
  margin-top: 0.5rem;
}
.gcard--link {
  text-decoration: none;
  background: #db4938;
  color: #fff;
  padding: 0.3rem 1rem;
  border-radius: 20px;
}

.card-header .fas {
  transition: .3s transform;
}
.card-header .collapsed .fas {
  transform: rotate(180deg);
}
</style>
</head>
<body>
  <div class="container">
    <div class="jumbotron card" style="background-color:#edd9c0;">
      <div class="card-img-overlay h-100 d-flex flex-column justify-content-end">
        <p class="text-center">
          <small class="text-muted">[BETA]</small><small>v1.37.16</small>
        </p>
      </div>
      <p class="text-center">
        <a href="main.html">
          <img src="images/i128x128.png" class="img-responsive" style="margin:0 auto;" alt="Responsive image">
        </a>
      </p>
      <h5 class="text-center">Plant forward. Earn Vegan Coin!</h5>
      <div class="row justify-content-center">
        <button type="button" class="btn btn-outline-primary" disabled>
          Coins Balance
          <span id="accountBalance" class="badge badge-light">
          </span>
        </button>
        <div class="input-group col-sm-3">
          <div class="input-group-append">
            <input id="search-coins-input" type="text" class="form-control" placeholder="username">
            <button id="search-coins-button" type="button" class="btn btn-primary">
              <i class="fas fa-search"></i>Enter
            </button>
          </div>
        </div>
      </div>
      <p class="text-left font-weight-normal">
        Technical Instructions<br/>
        a. Allow Browser to use GPS<br/>
        b. <a href='#' onclick='window.open(`mailto:contact@pay-a-vegan.com`, `_self`);'>contact@pay-a-vegan.com</a> for help and questions.
      </p>

      <br />

      <!--Accordion wrapper-->
      <div class="accordion md-accordion" id="accordionEx" role="tablist" aria-multiselectable="true">

        <!-- Accordion card -->
        <div class="card">

          <!-- Card header -->
          <div class="card-header" role="tab" id="headingThree3">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx" href="#collapseThree3"
              aria-expanded="false" aria-controls="collapseThree3">
              <p class="mb-0">
                See what others are buying ...<i class="fas fa-angle-up rotate-icon"></i>
              </p>
            </a>
          </div>

          <!-- Card body -->
          <div id="collapseThree3" class="collapse" role="tabpanel" aria-labelledby="headingThree3" data-parent="#accordionEx">
            <input type="text" class="form-control mx-6" id="searchGrocery" placeholder="Search">
            <div id="gcards" class="gcards">
              Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3
              wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum
              eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla
              assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred
              nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer
              farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus
              labore sustainable VHS.
            </div>
          </div>

        </div>
        <!-- Accordion card -->

      </div>
      <!-- Accordion wrapper -->

    </div>

    <div id="mapid" style="height: 0px;"></div>

    <div class="row justify-content-center">
      <div class="col-sm-6">
        <p id="instruction" style="display: none;">Please drag the red pin to the place you want to choose</p>
        <input type="url" id="locationInput" class="form-control input-lg" style="display: none;" >
        <p><label id="locationLabel" for="locationInput" class="btn btn-primary my-2 btn-default btn-block btn-lg" style="display: none;" onclick="getCurrentLocation()">Set Location</label></p>
        <input type="text" id="address" class="form-control input-lg" style="display: none;">

        <p><label id="addressConfirm" for="address" class="btn btn-primary my-2 btn-default btn-block btn-lg" style="cursor: pointer;display: none;">Confirm Address</label></p>
      </div>
    </div>
    <!-- Ricardo: input restaurant -->
  <div id="after-location-loaded">
    <div class="row justify-content-center">
      <div class="col-sm-6 form-group">
        <div class="autocomplete">
          <input type="text" maxlength="999"
          class="form-control input-lg"
          id="accountLoginId"
          placeholder="What is your user name?"
          >
        </div>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-sm-6 form-group">
        <div class="autocomplete">
          <input type="text" maxlength="999"
          class="form-control input-lg"
          id="restaurantInput"
          placeholder="Name of Store"
          >
        </div>
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-sm-6 form-group">
        <input type="text"
        class="form-control input-lg"
        id="dishInput"
        placeholder="Name of Product">
      </div>
    </div>

    <div class="row justify-content-center">
      <div class="col-sm-6 form-group">
        <input type="text"
        class="form-control input-lg"
        id="helloMessageInput"
        placeholder="Do you like the Vegan Product?">
      </div>
    </div>

    <span class="glyphicon glyphicon-plus"></span>
    <div class="row justify-content-center">
      <img id="preview" src="" />
      <div class="picture-container">
        <div class="picture">
          <img src="https://mdbootstrap.com/img/Photos/Others/placeholder.jpg" class="picture-src" id="dishPicturePreview" title="">
          <input type="file" id="dish-picture" class="">
          <div class="picture-clear" id="dish-clear">
            <label>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f10c0c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
            </label>
          </div>
        </div>
        <span id="upload-dish" class="badge badge-primary badge-pill">Upload Grocery
          <svg id="upload-dish-checkmark" display="none" width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="green" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
          </svg>
        </span>
      </div>
      <div class="picture-container">
        <div class="picture">
          <img src="https://mdbootstrap.com/img/Photos/Others/placeholder-avatar.jpg" class="picture-src" id="receiptPicturePreview" title="">
          <input type="file" id="receipt-picture" class="">
          <div class="picture-clear" id="receipt-clear">
            <label>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f10c0c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
            </label>
          </div>
        </div>
        <span id="upload-receipt" class="badge badge-pill badge-primary">Upload Receipt
          <svg id="upload-receipt-checkmark" display="none" width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check" fill="green" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
          </svg>
        </span>
      </div>
    </div>
  </div>
</div>

    <div class="row justify-content-center">
      <div class="col-xs-12" id="tags" style="display: none;">
        <div id="selectbox-container">
          <form>
            <div class="form-group">
              <label for="name">Type of Store:</label>
              <select id="groceryOrigins" multiple data-placeholder="Choose anything" data-allow-clear="1">
              </select>
            </div>

            <div class="form-group" id="groceryCategoryBlock">
              <label for="name">Category of Product:</label>
              <select id="groceryCategories" multiple data-placeholder="Choose anything" data-allow-clear="1">
              </select>

              <label for="name">Brand of Product:</label>
              <input type="text"
                class="form-control input-lg"
                id="groceryBrand"
                placeholder="What is the Brand?">
            </div>

            <div class="form-group" id="groceryIngredientBlock">
              <label for="name">Ingredient:</label>
              <select id="groceryIngredients" multiple data-placeholder="Choose anything">
                <option>Coconut Milk</option>
                <option>Soy</option>
                <option>Coconut Oil</option>
                <option>Yeast Extract</option>
                <option>Potato Starch</option>
                <option>Tree Nuts</option>
                <option>Soybeans</option>
                <option>Cereals</option>
                <option>Beet Root</option>
                <option>Tumeric</option>
                <option>Pepper</option>
                <option>Ginger</option>
              </select>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Ricardo tags-->
    <div class="row justify-content-center" >
      <div class="col-xs-12 btn-group-toggle" id="tags" style="display: none;">
        <input type="checkbox" id="gluten-free" name="">
        <label for="gluten-free">Gluten-free</label>
        <input type="checkbox" id="egg-free" name="">
        <label for="egg-free">Egg-free</label>
        <br>
        <input type="checkbox" id="dairy-free" name="">
        <label for="dairy-free">Dairy-free</label>
        <input type="checkbox" id="treenut-free" name="">
        <label for="treenut-free">Treenut-free</label>
        <br>
        <input type="checkbox" id="peanut-free" name="">
        <label for="peanut-free">Peanut-free</label>
        <input type="checkbox" id="soy-free" name="">
        <label for="soy-free">Soy-free</label>
        <br>
        <input type="checkbox" id="raw" name="">
        <label for="raw">Raw</label>
        <input type="checkbox" id="vegan" name="">
        <label for="vegan">Vegan</label>
        <br>
        <input type="checkbox" id="buddhist-friendly" name="">
        <label for="buddhist-friendly">Buddhist-friendly</label>
        <input type="checkbox" id="all-natural" name="">
        <label for="all-natural">All natural</label>
      </div>
    </div>

    <!-- Send button -->
    <div class="row justify-content-center">
      <div class="col-xs-12">
        <button id="sendBtn" class="btn btn-success my-2 btn-default btn-block btn-lg" style="display: none;" onClick="upload()">
          Send
        </button>
      </div>
    </div>

    <!-- Add another dish button -->
    <div class="row justify-content-center">
      <div class="col-xs-12">
        <button id="addBtn" class="btn btn-success my-2 btn-default btn-block btn-lg" style="display: none;" onClick="refreshMap()">
          Add another dish
        </button>
      </div>
    </div>

    <div class="row mt-1 justify-content-center no-gutters">
      <a href="main.html">
        <label id="back" class="btn btn-primary my-2 btn-default btn-block btn-lg" style="cursor: pointer;">Back to Main</label>
      </a>
    </div>

  <hr>

  <!-- Place to show the latest message -->
  <h2 class="text-center"></h2>
  <h3 id="helloMessageOutput" class="text-center text-warning">
    <span class="text-info"></span>
  </h3>
</div>

<!-- Modal -->
<div class="modal fade" id="staticProgressBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticProgressBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticProgressBackdropLabel">Uploading, please wait ...</h5>
      </div>
      <div class="modal-body">
        <div class="progress md-progress" style="height: 20px">
          <div id="progressBar" class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 0%; height: 15px" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Upload Complete</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="mx-4 my-2">
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text" id="btnGroupAddon"><img src="images/BC_Logo_.png" class="img-responsive" style="margin:0 auto;" alt="Responsive image"></div>
            </div>
            <input id="accountId" type="text" class="form-control" placeholder="Check account balance" aria-label="Check account balance" aria-describedby="btnGroupAddon">
          </div>
        </div>
        <div class="card mx-4 my-2" id="coins" style="display: none;">
          <div class="row no-gutters">
            <div class="col-sm-2" style="background: #868e96;">
            </div>
            <div class="col-sm-7">
              <div class="card-body">
                <h6 class="card-title" id="coinAddress"></h5>
                <p class="card-text" id="coinBalance"></p>
                <a href="#" id="viewCoinProfile" class="btn btn-primary stretched-link">View Profile</a>
                <p><abbr id="coinProfile"></abbr></p>
              </div>
            </div>
          </div>
        </div>
        <div class="mx-4 my-2">
          You will receive US$0.10 equivalent of VeganCoin which fluctuates with Bitcoin price.
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn modal-dismiss" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>




<script src="js/JIC.min.js" type="text/javascript"></script>
<script src="js/jquery-3.5.1.min.js"></script>
<script src="js/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="js/select2.min.js"></script>
<script src="js/script.js"></script>
<script src="js/autocomplete.js"></script>
<script src="js/autocomplete2.js"></script>
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script defer src="js/leaflet.js" ></script>
<script defer src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>
<script defer src="js/mapHelper.js" type="text/javascript"></script>
<script defer src="js/init-firebase.js"></script>
<script defer src="js/grocery.js"></script>
<script>
const showCoffees = () => {
  const container = document.querySelector(".gcards");
  var output = ""
  db.collection('grocery_receipts')
  .where("hide", "==", false)
  .get().then((snapshot) => {
    snapshot.docs.forEach(doc => {
      var groceryData = doc.data();
      var groceryStore = groceryData.groceryStore;
      var product = groceryData.product;
      var fileURL = groceryData.fileURL;
      output += `
              <div class="gcard" data-filter="${groceryStore} ${product}">
                <img class="gcard--avatar" src=${fileURL} />
                <h1 class="gcard--title">${product}</h1>
                <a class="btn-sm btn-primary text-white" role="button">${groceryStore}</a>
              </div>
              `
    })
    container.innerHTML = output
  })
}

  $(document).ready(function(){
    $("#searchGrocery").on("keyup", function() {
      var value = $(this).val().toLowerCase();
      $("#gcards div").filter(function() {
        $(this).toggle($(this).data('filter').toLowerCase().indexOf(value) > -1)
      });
    });
  });

document.addEventListener("DOMContentLoaded", showCoffees)
</script>
</body>
</html>
